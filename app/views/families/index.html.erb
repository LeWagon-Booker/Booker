<% if @families.empty? %>
  <h1>You have no families for the moment!</h1>
  <br>
  <%= link_to "Create a new family!", "#", "data-toggle"=>"modal",  "data-target"=>"#CreateFamily", class:"btn-booker" %>
<% else %>
  <h1>Your families</h1>
  <% @families.each do |family| %>
    <% @family = family %>
    <div class="card-product">
      <img src="<%= cl_image_path family.picture.key %>" />
      <div class="card-product-infos">
        <h1><%= link_to family.name, family_path(family)%></h1>
        <% @members = family.users.map { |user| user.username } %>
        <p>Members <% @members.each do |member| %>- <%= member %> <% end %> </p>
      </div>
      <%= link_to "Add a new member!", "#", "data-toggle"=>"modal",  "data-target"=>"#AddMember", class:"btn-booker" %>
    </div>
  <% end %>
<% end %>



<!-- add family modal -->
<div class="modal fade" id="CreateFamily" tabindex="-1" role="dialog" aria-labelledby="EditModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="EditModalLongTitle">Add a new family!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <% @family_new = Family.new %>
        <%= simple_form_for @family_new do |f| %>
          <%= f.input :name, label: "Give it name"%>
          <%= f.input :picture, as: :file%>
          <%= f.button :submit, class: "btn-booker" %>
        <% end %>
      </div>
    </div>
  </div>
</div>


<!-- add_family modal -->

<div class="modal fade" id="AddMember" tabindex="-1" role="dialog" aria-labelledby="EditModalTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="EditModalLongTitle">Add this member!</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= simple_form_for [@family, @adhesion] do |f| %>
          <%= f.association :user, input_html: { class: 'select2'  }, label_method: :username %>
          <%= f.button :submit, class: "btn-booker" %>
        <% end %>
      </div>
    </div>
  </div>
</div>
